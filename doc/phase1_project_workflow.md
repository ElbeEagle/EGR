# åŸºäºæœ€å¤§ç†µåŸç†çš„æ•°å­¦æ¨ç†ç³»ç»Ÿ - é¡¹ç›®å·¥ä½œæµç¨‹æ–‡æ¡£

> **é¡¹ç›®åç§°**: Entropy-Guided Reasoning (EGR)  
> **æ ¸å¿ƒåˆ›æ–°**: å°†æœ€å¤§ç†µåŸç†ç³»ç»ŸåŒ–åº”ç”¨äºè‡ªåŠ¨æ•°å­¦æ¨ç†  
> **ç›®æ ‡æ•°æ®é›†**: Conic10K  
> **ç›®æ ‡å‡†ç¡®ç‡**: 60-80% (Phase 1)

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¾“å…¥ï¼šæ•°å­¦é—®é¢˜                              â”‚
â”‚   fact_expressions + query_expressions + answer              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—1: çŠ¶æ€æŠ½è±¡å™¨ (State Abstractor)                         â”‚
â”‚  â”œâ”€ è¾“å…¥: fact_expressions, query_expressions               â”‚
â”‚  â””â”€ è¾“å‡º: æŠ½è±¡çŠ¶æ€å‘é‡                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—2: å®šç†é€‰æ‹©å™¨ (Theorem Selector)                         â”‚
â”‚  â”œâ”€ è¾“å…¥: å½“å‰çŠ¶æ€                                            â”‚
â”‚  â”œâ”€ æ¨¡å‹: P(Y|X) - æœ€å¤§ç†µåˆ†ç±»å™¨                               â”‚
â”‚  â””â”€ è¾“å‡º: å®šç†æ¦‚ç‡åˆ†å¸ƒ + å½“å‰çŠ¶æ€ç†µ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—3: å®šç†åº”ç”¨å™¨ (Theorem Applicator)                       â”‚
â”‚  â”œâ”€ è¾“å…¥: å½“å‰çŠ¶æ€ + é€‰å®šå®šç†                                 â”‚
â”‚  â””â”€ è¾“å‡º: æ–°çŠ¶æ€                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—4: æ¨ç†å¼•æ“ (Reasoning Engine)                           â”‚
â”‚  â”œâ”€ ç­–ç•¥: ä¿¡æ¯å¢ç›Šæœ€å¤§åŒ–                                       â”‚
â”‚  â”œâ”€ å¾ªç¯: æ¨¡å—2 â†’ æ¨¡å—3 â†’ æ¨¡å—2...                            â”‚
â”‚  â””â”€ è¾“å‡º: æœ€ç»ˆç­”æ¡ˆ + æ¨ç†è·¯å¾„                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                è¾“å‡ºï¼šé¢„æµ‹ç­”æ¡ˆ + æ¨ç†æ­¥éª¤                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ä¸»è¦å·¥ä½œæ¨¡å—è¯¦è§£

---

### **æ¨¡å— 0: å®šç†åº“æ„å»º** 

**å·¥ä½œç›®æ ‡**: æ„å»ºConic10Ké¢†åŸŸçš„å½¢å¼åŒ–å®šç†åº“

#### ğŸ“ å·¥ä½œæµç¨‹

1. **æ•°æ®åˆ†æ**
   - ç»Ÿè®¡`train.json`ä¸­æ‰€æœ‰`process`å­—æ®µ
   - æå–å¸¸ç”¨æ¨ç†æ­¥éª¤å’Œå®šç†æ¨¡å¼
   - è¯†åˆ«å®šç†ä½¿ç”¨é¢‘ç‡

2. **å®šç†å½¢å¼åŒ–**
   - å®šä¹‰å®šç†å‰ç½®æ¡ä»¶ï¼ˆpreconditionï¼‰
   - å®šä¹‰å®šç†è¾“å‡ºï¼ˆoutputï¼‰
   - è®¾è®¡å®šç†ä¼˜å…ˆçº§ï¼ˆ3å±‚ï¼šåŸºç¡€/ä¸­çº§/é«˜çº§ï¼‰

3. **å®šç†å®ç°**
   - ç¼–å†™å®šç†çš„ç¬¦å·æ‰§è¡Œé€»è¾‘
   - å®ç°å‰ç½®æ¡ä»¶æ£€æŸ¥å‡½æ•°
   - ç¼–å†™å•å…ƒæµ‹è¯•

#### ğŸ“¥ è¾“å…¥
- **æ•°æ®**: `Conic10K/conic10k/train.json` 
- **äººå·¥çŸ¥è¯†**: åœ†é”¥æ›²çº¿æ•°å­¦å®šç†

#### ğŸ“¤ è¾“å‡º
```python
{
    "theorem_id": "T1_ellipse_abc",
    "name": "æ¤­åœ†å‚æ•°å…³ç³»",
    "formula": "aÂ² = bÂ² + cÂ²",
    "precondition": {
        "curve_type": "Ellipse",
        "required_params": ["any_two_of", ["a", "b", "c"]]
    },
    "output": {
        "type": "parameter_value",
        "produces": "missing_parameter"
    },
    "priority": "basic",
    "implementation": "function_reference"
}
```

#### âœ… éªŒæ”¶æ ‡å‡†
- [ ] è‡³å°‘15ä¸ªåŸºç¡€å®šç†
- [ ] è¦†ç›–è®­ç»ƒé›†ä¸­60%ä»¥ä¸Šçš„æ¨ç†æ­¥éª¤
- [ ] æ¯ä¸ªå®šç†æœ‰å®Œæ•´çš„å‰ç½®æ¡ä»¶å®šä¹‰
- [ ] æ¯ä¸ªå®šç†é€šè¿‡10ä¸ªå•å…ƒæµ‹è¯•

#### â±ï¸ é¢„è®¡æ—¶é—´
**1å‘¨**

---

### **æ¨¡å— 1: çŠ¶æ€æŠ½è±¡å™¨ (State Abstractor)**

**å·¥ä½œç›®æ ‡**: å°†åŸå§‹çš„`fact_expressions`æŠ½è±¡ä¸ºæœ‰é™ç»´åº¦çš„çŠ¶æ€è¡¨ç¤º

#### ğŸ“ å·¥ä½œæµç¨‹

1. **ç‰¹å¾æå–**
   - è§£æ`fact_expressions`å­—ç¬¦ä¸²
   - è¯†åˆ«æ›²çº¿ç±»å‹ï¼ˆEllipse/Hyperbola/Parabola/Circleï¼‰
   - æå–å·²çŸ¥ä¿¡æ¯ï¼ˆæ–¹ç¨‹/å‚æ•°/ç„¦ç‚¹/æ¸è¿‘çº¿ç­‰ï¼‰
   - åˆ†ç±»æŸ¥è¯¢ç±»å‹ï¼ˆç¦»å¿ƒç‡/æ–¹ç¨‹/åæ ‡/è·ç¦»ç­‰ï¼‰

2. **çŠ¶æ€ç¼–ç **
   - å°†æå–çš„ç‰¹å¾è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º
   - è®¡ç®—ä¿¡æ¯å®Œæ•´åº¦åˆ†æ•°ï¼ˆ0-1ï¼‰
   - ç”ŸæˆçŠ¶æ€å“ˆå¸Œï¼ˆç”¨äºå»é‡å’Œç´¢å¼•ï¼‰

3. **éªŒè¯ä¸ç»Ÿè®¡**
   - ç»Ÿè®¡è®­ç»ƒé›†çš„çŠ¶æ€åˆ†å¸ƒ
   - è®¡ç®—çŠ¶æ€ç©ºé—´è¦†ç›–ç‡

#### ğŸ“¥ è¾“å…¥
```python
{
    "fact_expressions": "G: Hyperbola; Expression(G) = (x^2/16 - y^2/25 = 1); LeftFocus(G) = F1; ...",
    "query_expressions": "Eccentricity(G)"
}
```

#### ğŸ“¤ è¾“å‡º
```python
{
    "state_vector": {
        "curve_type": "Hyperbola",
        "has_equation": True,
        "known_params": ["a=4", "b=5"],
        "has_focus": True,
        "query_type": "eccentricity",
        "completeness": 0.6
    },
    "state_hash": "HYP_EQ_AB_FOC_ECCENT",
    "state_embedding": [0.2, 0.8, 1.0, ...]  # ç”¨äºç¥ç»ç½‘ç»œ
}
```

#### âœ… éªŒæ”¶æ ‡å‡†
- [ ] è¦†ç›–ç‡ > 95%ï¼ˆè®­ç»ƒé›†æ ·æœ¬èƒ½è¢«æˆåŠŸæŠ½è±¡ï¼‰
- [ ] çŠ¶æ€ç©ºé—´å¤§å°ï¼š500-1000ä¸ªä»£è¡¨æ€§çŠ¶æ€
- [ ] ä¿¡æ¯å®Œæ•´åº¦ä¼°è®¡ä¸äººå·¥æ ‡æ³¨ç›¸å…³æ€§ > 0.7

#### â±ï¸ é¢„è®¡æ—¶é—´
**1-1.5å‘¨**

#### ğŸ“‚ ä»£ç æ–‡ä»¶
- `src/state_abstractor.py`
- `tests/test_state_abstractor.py`

---

### **æ¨¡å— 2: è®­ç»ƒæ•°æ®æ„é€ å™¨**

**å·¥ä½œç›®æ ‡**: ä»Conic10Kæ„é€ ç”¨äºè®­ç»ƒç¥ç»ç½‘ç»œçš„(çŠ¶æ€, å®šç†, ç†µ)ä¸‰å…ƒç»„

#### ğŸ“ å·¥ä½œæµç¨‹

1. **æ¨ç†æ­¥éª¤è§£æ**
   - ä½¿ç”¨LLMæˆ–è§„åˆ™æ–¹æ³•è§£æ`process`å­—æ®µ
   - è¯†åˆ«æ¯ä¸€æ­¥ä½¿ç”¨çš„å®šç†
   - æ„å»ºæ¨ç†è½¨è¿¹

2. **çŠ¶æ€æ¨¡æ‹Ÿ**
   - ä»åˆå§‹çŠ¶æ€å¼€å§‹
   - é€æ­¥åº”ç”¨å®šç†ï¼Œç”Ÿæˆä¸­é—´çŠ¶æ€
   - è®°å½•æ¯ä¸ªçŠ¶æ€-å®šç†å¯¹

3. **ç†µæ ‡ç­¾ç”Ÿæˆ**
   - æ–¹æ³•A: å‰©ä½™æ­¥æ•°ä½œä¸ºç†µä¼°è®¡ï¼ˆç®€å•ï¼‰
   - æ–¹æ³•B: åŸºäºä¿¡æ¯å®Œæ•´åº¦ä¼°è®¡ï¼ˆæ›´å‡†ç¡®ï¼‰

4. **æ•°æ®å¢å¼º**ï¼ˆå¯é€‰ï¼‰
   - æ‰“ä¹±æ¨ç†é¡ºåº
   - ç”Ÿæˆè´Ÿæ ·æœ¬ï¼ˆä¸é€‚ç”¨çš„å®šç†ï¼‰

#### ğŸ“¥ è¾“å…¥
```python
{
    "fact_expressions": "...",
    "query_expressions": "...",
    "process": "åŒæ›²çº¿çš„æ¸è¿‘çº¿æ–¹ç¨‹ä¸ºy=Â±(m/2)xï¼Œæ‰€ä»¥m=5.",
    "answer_expressions": "5"
}
```

#### ğŸ“¤ è¾“å‡º
```python
[
    {
        "state": state_vector_0,
        "theorem_label": "T6_asymptote",
        "entropy_label": 2.0,  # è¿˜éœ€2æ­¥
        "is_applicable": True
    },
    {
        "state": state_vector_1,
        "theorem_label": "T15_substitution",
        "entropy_label": 1.0,  # è¿˜éœ€1æ­¥
        "is_applicable": True
    },
    ...
]
```

#### âœ… éªŒæ”¶æ ‡å‡†
- [ ] è®­ç»ƒé›†å¤§å°ï¼š50,000+ æ ·æœ¬
- [ ] éªŒè¯é›†å¤§å°ï¼š10,000+ æ ·æœ¬
- [ ] å®šç†åˆ†å¸ƒåŸºæœ¬å‡è¡¡ï¼ˆæ¯ä¸ªå®šç†è‡³å°‘500ä¸ªæ ·æœ¬ï¼‰
- [ ] ç†µæ ‡ç­¾çš„åˆç†æ€§æ£€æŸ¥é€šè¿‡

#### â±ï¸ é¢„è®¡æ—¶é—´
**1.5-2å‘¨**

#### ğŸ“‚ ä»£ç æ–‡ä»¶
- `src/data_constructor.py`
- `src/process_parser.py`

---

### **æ¨¡å— 3: ç¥ç»ç½‘ç»œæ¨¡å‹**

**å·¥ä½œç›®æ ‡**: è®­ç»ƒå¤šä»»åŠ¡å­¦ä¹ æ¨¡å‹ï¼Œé¢„æµ‹P(Y|X)å’ŒH(S)

#### ğŸ“ å·¥ä½œæµç¨‹

1. **æ¨¡å‹è®¾è®¡**
   - Tokenizerï¼šå°†çŠ¶æ€å‘é‡è½¬æ¢ä¸ºtokenåºåˆ—
   - Encoderï¼šTransformerç¼–ç å™¨ï¼ˆ6å±‚ï¼‰
   - Head 1ï¼šå®šç†åˆ†ç±»å¤´ï¼ˆ15-50ç±»ï¼‰
   - Head 2ï¼šç†µå›å½’å¤´ï¼ˆ1ä¸ªæ•°å€¼ï¼‰

2. **è®­ç»ƒé…ç½®**
   - æŸå¤±å‡½æ•°ï¼šäº¤å‰ç†µï¼ˆå®šç†ï¼‰+ MSEï¼ˆç†µï¼‰
   - ä¼˜åŒ–å™¨ï¼šAdamW
   - å­¦ä¹ ç‡è°ƒåº¦ï¼šWarmup + Cosine Decay
   - æ‰¹å¤§å°ï¼š64
   - Epochï¼š50-100

3. **è®­ç»ƒç›‘æ§**
   - å®šç†é€‰æ‹©å‡†ç¡®ç‡
   - ç†µä¼°è®¡MAE/MSE
   - éªŒè¯é›†æ€§èƒ½
   - è¿‡æ‹Ÿåˆæ£€æµ‹

4. **æ¨¡å‹è¯„ä¼°**
   - Top-1å‡†ç¡®ç‡ï¼ˆå®šç†é€‰æ‹©ï¼‰
   - Top-3å‡†ç¡®ç‡
   - ç†µä¼°è®¡çš„Pearsonç›¸å…³ç³»æ•°

#### ğŸ“¥ è¾“å…¥
```python
{
    "train_data": [
        {"state_tokens": [...], "theorem_label": 3, "entropy_label": 2.1},
        ...
    ],
    "val_data": [...]
}
```

#### ğŸ“¤ è¾“å‡º
```python
# è®­ç»ƒå¥½çš„æ¨¡å‹
model = EntropyGuidedReasoner(
    vocab_size=500,
    d_model=256,
    nhead=8,
    num_layers=6,
    num_theorems=15
)

# æ¨ç†æ—¶è¾“å‡º
{
    "theorem_probs": [0.05, 0.12, 0.58, ...],  # 15ä¸ªå®šç†çš„æ¦‚ç‡
    "entropy_estimate": 1.8  # å½“å‰çŠ¶æ€çš„ç†µä¼°è®¡
}
```

#### âœ… éªŒæ”¶æ ‡å‡†
- [ ] å®šç†é€‰æ‹©å‡†ç¡®ç‡ï¼ˆTop-1ï¼‰> 70%
- [ ] å®šç†é€‰æ‹©å‡†ç¡®ç‡ï¼ˆTop-3ï¼‰> 85%
- [ ] ç†µä¼°è®¡ MAE < 0.5
- [ ] ç†µä¼°è®¡ä¸å®é™…æ­¥æ•°çš„ç›¸å…³ç³»æ•° > 0.75

#### â±ï¸ é¢„è®¡æ—¶é—´
**2-3å‘¨**

#### ğŸ“‚ ä»£ç æ–‡ä»¶
- `src/models/egr_model.py`
- `src/models/tokenizer.py`
- `src/train.py`
- `configs/model_config.yaml`

---

### **æ¨¡å— 4: å®šç†åº”ç”¨å™¨ (Theorem Applicator)**

**å·¥ä½œç›®æ ‡**: ç¬¦å·æ‰§è¡Œå¼•æ“ï¼Œç»™å®šçŠ¶æ€å’Œå®šç†ï¼Œè®¡ç®—æ–°çŠ¶æ€

#### ğŸ“ å·¥ä½œæµç¨‹

1. **å‰ç½®æ¡ä»¶æ£€æŸ¥**
   - éªŒè¯å®šç†æ˜¯å¦é€‚ç”¨äºå½“å‰çŠ¶æ€
   - æ£€æŸ¥æ‰€éœ€å‚æ•°æ˜¯å¦å·²çŸ¥
   - æ£€æŸ¥æ›²çº¿ç±»å‹æ˜¯å¦åŒ¹é…

2. **ç¬¦å·æ¨ç†**
   - æ ¹æ®å®šç†å…¬å¼è®¡ç®—æ–°ä¿¡æ¯
   - å¯èƒ½æ¶‰åŠï¼š
     - æ•°å€¼è®¡ç®—ï¼ˆaÂ²+bÂ²=cÂ²ï¼‰
     - ç¬¦å·æ›¿æ¢ï¼ˆä»£å…¥æ–¹ç¨‹ï¼‰
     - é€»è¾‘æ¨ç†ï¼ˆç”±å®šä¹‰å¾—å‡ºæ€§è´¨ï¼‰

3. **çŠ¶æ€æ›´æ–°**
   - å°†æ–°æ¨å¯¼çš„ä¿¡æ¯åŠ å…¥çŠ¶æ€
   - æ›´æ–°ä¿¡æ¯å®Œæ•´åº¦
   - é‡æ–°è®¡ç®—çŠ¶æ€å‘é‡

4. **éªŒè¯**
   - æ£€æŸ¥çŠ¶æ€ä¸€è‡´æ€§
   - æ£€æŸ¥æ˜¯å¦äº§ç”ŸçŸ›ç›¾

#### ğŸ“¥ è¾“å…¥
```python
{
    "current_state": {
        "curve_type": "Hyperbola",
        "known_params": {"a": 4, "b": 5}
    },
    "theorem": "T2_hyperbola_abc"  # cÂ² = aÂ² + bÂ²
}
```

#### ğŸ“¤ è¾“å‡º
```python
{
    "new_state": {
        "curve_type": "Hyperbola",
        "known_params": {"a": 4, "b": 5, "c": 6.4}  # æ–°å¢c
    },
    "success": True,
    "derived_fact": "c = sqrt(41)"
}
```

#### âœ… éªŒæ”¶æ ‡å‡†
- [ ] æ”¯æŒ15ä¸ªåŸºç¡€å®šç†çš„æ‰§è¡Œ
- [ ] æ¯ä¸ªå®šç†é€šè¿‡10ä¸ªæµ‹è¯•ç”¨ä¾‹
- [ ] èƒ½å¤Ÿå¤„ç†è¾¹ç•Œæƒ…å†µï¼ˆå¦‚é™¤ä»¥é›¶ã€æ— è§£ç­‰ï¼‰
- [ ] æ‰§è¡Œé€Ÿåº¦ < 10ms/æ¬¡

#### â±ï¸ é¢„è®¡æ—¶é—´
**1.5-2å‘¨**

#### ğŸ“‚ ä»£ç æ–‡ä»¶
- `src/theorem_applicator.py`
- `src/symbolic_executor.py`
- `tests/test_theorem_applicator.py`

---

### **æ¨¡å— 5: æ¨ç†å¼•æ“ (Reasoning Engine)**

**å·¥ä½œç›®æ ‡**: é›†æˆæ‰€æœ‰æ¨¡å—ï¼Œå®ç°å®Œæ•´çš„é—®é¢˜æ±‚è§£æµç¨‹

#### ğŸ“ å·¥ä½œæµç¨‹

1. **åˆå§‹åŒ–**
   - æŠ½è±¡åˆå§‹çŠ¶æ€
   - è®¾ç½®æœ€å¤§æ¨ç†æ­¥æ•°ï¼ˆå¦‚10æ­¥ï¼‰

2. **è¿­ä»£æ¨ç†å¾ªç¯**
   ```
   for step in range(max_steps):
       # 2.1 æ¨¡å‹é¢„æµ‹
       theorem_probs, current_entropy = model(current_state)
       
       # 2.2 å€™é€‰å®šç†è¯„ä¼°
       for each theorem:
           if å¯åº”ç”¨:
               è®¡ç®—åº”ç”¨åçš„çŠ¶æ€
               ä¼°è®¡æ–°çŠ¶æ€çš„ç†µ
               è®¡ç®—ä¿¡æ¯å¢ç›Š = current_entropy - next_entropy
               
               ç»¼åˆå¾—åˆ† = Î»â‚Â·P(theorem|state) + Î»â‚‚Â·info_gain
       
       # 2.3 é€‰æ‹©æœ€ä¼˜å®šç†
       best_theorem = argmax(scores)
       
       # 2.4 åº”ç”¨å®šç†
       current_state = apply_theorem(current_state, best_theorem)
       
       # 2.5 æ£€æŸ¥æ˜¯å¦è¾¾åˆ°ç›®æ ‡
       if is_solved(current_state):
           return extract_answer(current_state)
   ```

3. **ç­”æ¡ˆæå–**
   - ä»æœ€ç»ˆçŠ¶æ€ä¸­æå–ç­”æ¡ˆ
   - æ ¼å¼åŒ–ä¸ºæ ‡å‡†å½¢å¼

4. **æ¨ç†è·¯å¾„è®°å½•**
   - è®°å½•æ¯ä¸€æ­¥ä½¿ç”¨çš„å®šç†
   - è®°å½•ç†µçš„å˜åŒ–æ›²çº¿

#### ğŸ“¥ è¾“å…¥
```python
{
    "fact_expressions": "G: Ellipse; Expression(G) = (x^2/4 + y^2/3 = 1)",
    "query_expressions": "Eccentricity(G)",
    "answer_expressions": "sqrt(3)/3"  # ä»…ç”¨äºéªŒè¯
}
```

#### ğŸ“¤ è¾“å‡º
```python
{
    "predicted_answer": "sqrt(3)/3",
    "reasoning_path": [
        {"step": 1, "theorem": "T5_extract_params", "result": "a=2, b=sqrt(3)"},
        {"step": 2, "theorem": "T1_ellipse_abc", "result": "c=1"},
        {"step": 3, "theorem": "T4_eccentricity", "result": "e=sqrt(3)/3"}
    ],
    "entropy_trace": [2.5, 1.2, 0.3, 0.0],  # ç†µçš„å˜åŒ–
    "is_correct": True,
    "num_steps": 3
}
```

#### âœ… éªŒæ”¶æ ‡å‡†
- [ ] åœ¨æµ‹è¯•é›†ä¸Šå‡†ç¡®ç‡ > 60%
- [ ] å¹³å‡æ¨ç†æ­¥æ•° < 6æ­¥
- [ ] 95%çš„é—®é¢˜èƒ½åœ¨10æ­¥å†…å®Œæˆæˆ–æŠ¥å‘Šå¤±è´¥
- [ ] æ¨ç†è·¯å¾„å¯è§£é‡Šï¼ˆæ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®çš„å®šç†ï¼‰

#### â±ï¸ é¢„è®¡æ—¶é—´
**1-1.5å‘¨**

#### ğŸ“‚ ä»£ç æ–‡ä»¶
- `src/reasoning_engine.py`
- `src/answer_extractor.py`
- `src/eval.py`

---

### **æ¨¡å— 6: è¯„ä¼°ä¸åˆ†æ**

**å·¥ä½œç›®æ ‡**: åœ¨Conic10Kæµ‹è¯•é›†ä¸Šè¯„ä¼°ç³»ç»Ÿæ€§èƒ½ï¼Œåˆ†æç»“æœ

#### ğŸ“ å·¥ä½œæµç¨‹

1. **æ€§èƒ½è¯„ä¼°**
   - å‡†ç¡®ç‡è®¡ç®—
   - æŒ‰ç­”æ¡ˆç±»å‹åˆ†ç±»ç»Ÿè®¡
   - æŒ‰é—®é¢˜éš¾åº¦åˆ†ç±»ç»Ÿè®¡

2. **ç†µæœ‰æ•ˆæ€§éªŒè¯**
   - ç†µä¼°è®¡ vs å®é™…æ­¥æ•°çš„ç›¸å…³æ€§
   - ç†µä¼°è®¡ vs äººå·¥éš¾åº¦è¯„åˆ†çš„ç›¸å…³æ€§

3. **å®šç†ä½¿ç”¨åˆ†æ**
   - ç»Ÿè®¡æ¯ä¸ªå®šç†çš„ä½¿ç”¨é¢‘ç‡
   - åˆ†æå®šç†é€‰æ‹©çš„å‡†ç¡®æ€§

4. **é”™è¯¯åˆ†æ**
   - åˆ†ç±»é”™è¯¯ç±»å‹ï¼ˆå®šç†é€‰æ‹©é”™è¯¯ã€ç¬¦å·æ‰§è¡Œé”™è¯¯ã€ç­”æ¡ˆæå–é”™è¯¯ï¼‰
   - æŠ½æ ·åˆ†æå…¸å‹é”™è¯¯æ¡ˆä¾‹

5. **æ¶ˆèå®éªŒ**
   - å»é™¤ä¿¡æ¯å¢ç›Š â†’ åªç”¨æ¨¡å‹é¢„æµ‹
   - å»é™¤ç†µä¼°è®¡ â†’ å›ºå®šæ¨ç†ç­–ç•¥
   - å®šç†åº“å¤§å°çš„å½±å“

#### ğŸ“¥ è¾“å…¥
```python
{
    "test_set": "Conic10K/conic10k/test.json",
    "model": trained_model,
    "reasoning_engine": solver
}
```

#### ğŸ“¤ è¾“å‡º
```python
{
    "overall_accuracy": 0.68,
    "accuracy_by_answer_type": {
        "simple_number": 0.78,
        "complex_number": 0.65,
        "equation": 0.58,
        "coordinate": 0.72
    },
    "entropy_correlation": {
        "pearson": 0.82,
        "spearman": 0.79
    },
    "theorem_usage": {
        "T1_ellipse_abc": 1523,
        "T4_eccentricity": 1205,
        ...
    },
    "error_analysis": {
        "theorem_selection_error": 45,
        "symbolic_execution_error": 28,
        "answer_extraction_error": 12
    },
    "avg_reasoning_steps": 4.8
}
```

#### âœ… éªŒæ”¶æ ‡å‡†
- [ ] å®Œæ•´çš„è¯„ä¼°æŠ¥å‘Š
- [ ] è‡³å°‘3ä¸ªæ¶ˆèå®éªŒ
- [ ] è‡³å°‘10ä¸ªè¯¦ç»†çš„æ¡ˆä¾‹åˆ†æ
- [ ] å¯è§†åŒ–å›¾è¡¨ï¼ˆç†µæ›²çº¿ã€å®šç†ä½¿ç”¨åˆ†å¸ƒç­‰ï¼‰

#### â±ï¸ é¢„è®¡æ—¶é—´
**1.5-2å‘¨**

#### ğŸ“‚ ä»£ç æ–‡ä»¶
- `src/evaluation.py`
- `src/analysis.py`
- `notebooks/results_analysis.ipynb`

---

## ğŸ“… æ•´ä½“æ—¶é—´çº¿

```
Week 1    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  æ¨¡å—0: å®šç†åº“æ„å»º
Week 2    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  æ¨¡å—1: çŠ¶æ€æŠ½è±¡å™¨
Week 3    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  æ¨¡å—4: å®šç†åº”ç”¨å™¨
Week 4-5  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  æ¨¡å—2: æ•°æ®æ„é€ 
Week 6-7  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  æ¨¡å—3: æ¨¡å‹è®­ç»ƒ
Week 8    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  æ¨¡å—5: æ¨ç†å¼•æ“
Week 9-10 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  æ¨¡å—6: è¯„ä¼°åˆ†æ
Week 11-12 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  è®ºæ–‡æ’°å†™ä¸å®éªŒè¡¥å……

æ€»è®¡ï¼š12å‘¨ï¼ˆçº¦3ä¸ªæœˆï¼‰
```

---

## ğŸ“Š å…³é”®æŒ‡æ ‡æ±‡æ€»

| æ¨¡å— | å…³é”®æŒ‡æ ‡ | ç›®æ ‡å€¼ |
|------|---------|--------|
| å®šç†åº“ | å®šç†æ•°é‡ | 15+ (åŸºç¡€) |
| çŠ¶æ€æŠ½è±¡å™¨ | è¦†ç›–ç‡ | > 95% |
| è®­ç»ƒæ•°æ® | æ ·æœ¬æ•° | 50,000+ |
| ç¥ç»ç½‘ç»œ | å®šç†é€‰æ‹©å‡†ç¡®ç‡ | > 70% |
| ç¥ç»ç½‘ç»œ | ç†µä¼°è®¡MAE | < 0.5 |
| æ¨ç†å¼•æ“ | ç«¯åˆ°ç«¯å‡†ç¡®ç‡ | **60-80%** |
| æ¨ç†å¼•æ“ | å¹³å‡æ­¥æ•° | < 6æ­¥ |
| åˆ†æ | ç†µä¸éš¾åº¦ç›¸å…³æ€§ | > 0.75 |

---

## ğŸ¯ é‡Œç¨‹ç¢‘æ£€æŸ¥ç‚¹

### âœ… Milestone 1 (Week 3)
- [ ] 15ä¸ªåŸºç¡€å®šç†å®ç°å®Œæˆ
- [ ] çŠ¶æ€æŠ½è±¡å™¨éªŒè¯é€šè¿‡
- [ ] å®šç†åº”ç”¨å™¨æ ¸å¿ƒåŠŸèƒ½å®Œæˆ

### âœ… Milestone 2 (Week 7)
- [ ] è®­ç»ƒæ•°æ®æ„é€ å®Œæˆ
- [ ] ç¥ç»ç½‘ç»œè®­ç»ƒå®Œæˆ
- [ ] æ¨¡å‹æ€§èƒ½è¾¾æ ‡ï¼ˆå®šç†é€‰æ‹©>70%ï¼‰

### âœ… Milestone 3 (Week 10)
- [ ] ç«¯åˆ°ç«¯ç³»ç»Ÿé›†æˆå®Œæˆ
- [ ] æµ‹è¯•é›†å‡†ç¡®ç‡>60%
- [ ] å®Œæ•´è¯„ä¼°æŠ¥å‘Š

### âœ… Milestone 4 (Week 12)
- [ ] è®ºæ–‡åˆç¨¿å®Œæˆ
- [ ] æ‰€æœ‰å®éªŒå®Œæˆ
- [ ] ä»£ç æ•´ç†å’Œæ–‡æ¡£å®Œå–„

---

## ğŸ“‚ é¡¹ç›®ç›®å½•ç»“æ„

```
EGR/
â”œâ”€â”€ Conic10K/                    # æ•°æ®é›†
â”‚   â””â”€â”€ conic10k/
â”‚       â”œâ”€â”€ train.json
â”‚       â”œâ”€â”€ dev.json
â”‚       â””â”€â”€ test.json
â”‚
â”œâ”€â”€ src/                         # æºä»£ç 
â”‚   â”œâ”€â”€ state_abstractor.py     # æ¨¡å—1
â”‚   â”œâ”€â”€ data_constructor.py     # æ¨¡å—2
â”‚   â”œâ”€â”€ theorem_applicator.py   # æ¨¡å—4
â”‚   â”œâ”€â”€ reasoning_engine.py     # æ¨¡å—5
â”‚   â”œâ”€â”€ evaluation.py           # æ¨¡å—6
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ egr_model.py        # æ¨¡å—3
â”‚   â”‚   â””â”€â”€ tokenizer.py
â”‚   â””â”€â”€ theorems/
â”‚       â”œâ”€â”€ theorem_library.py  # æ¨¡å—0
â”‚       â””â”€â”€ basic_theorems.py
â”‚
â”œâ”€â”€ configs/                     # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ model_config.yaml
â”‚   â””â”€â”€ training_config.yaml
â”‚
â”œâ”€â”€ tests/                       # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_state_abstractor.py
â”‚   â”œâ”€â”€ test_theorem_applicator.py
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ notebooks/                   # å®éªŒåˆ†æ
â”‚   â”œâ”€â”€ data_analysis.ipynb
â”‚   â””â”€â”€ results_analysis.ipynb
â”‚
â”œâ”€â”€ outputs/                     # è¾“å‡ºç»“æœ
â”‚   â”œâ”€â”€ models/                  # è®­ç»ƒå¥½çš„æ¨¡å‹
â”‚   â”œâ”€â”€ results/                 # è¯„ä¼°ç»“æœ
â”‚   â””â”€â”€ logs/                    # è®­ç»ƒæ—¥å¿—
â”‚
â””â”€â”€ doc/                         # æ–‡æ¡£
    â”œâ”€â”€ phase1_project_workflow.md  # æœ¬æ–‡æ¡£
    â”œâ”€â”€ theorem_library_spec.md     # å®šç†åº“è§„èŒƒ
    â””â”€â”€ paper_draft.md              # è®ºæ–‡è‰ç¨¿
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

### æ­¥éª¤1: ç¯å¢ƒé…ç½®
```bash
# å®‰è£…ä¾èµ–
pip install torch transformers numpy scipy sympy pandas

# éªŒè¯æ•°æ®é›†
python scripts/verify_dataset.py
```

### æ­¥éª¤2: è¿è¡Œæ•°æ®åˆ†æï¼ˆæ¨¡å—0çš„ç¬¬ä¸€æ­¥ï¼‰
```bash
python src/theorems/analyze_reasoning_patterns.py \
    --data Conic10K/conic10k/train.json \
    --output outputs/theorem_statistics.json
```

### æ­¥éª¤3: å®ç°ç¬¬ä¸€ä¸ªå®šç†
```bash
# å‚è€ƒ src/theorems/basic_theorems.py
# å®ç° T5_extract_params å®šç†
```

### æ­¥éª¤4: æµ‹è¯•çŠ¶æ€æŠ½è±¡å™¨
```bash
python tests/test_state_abstractor.py
```

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [å®šç†åº“è¯¦ç»†è§„èŒƒ](theorem_library_spec.md)
- [çŠ¶æ€è¡¨ç¤ºè®¾è®¡æ–‡æ¡£](state_representation.md)
- [æ¨¡å‹æ¶æ„è¯´æ˜](model_architecture.md)
- [å®éªŒè®¾ç½®ä¸è¶…å‚æ•°](experiment_setup.md)

---

## ğŸ’¡ æ³¨æ„äº‹é¡¹

### å…³äºåˆ›æ–°æ€§
1. **æœ€å¤§ç†µåŸç†çš„ä¸‰å±‚åº”ç”¨**æ˜¯æ ¸å¿ƒç†è®ºåˆ›æ–°ï¼Œéœ€è¦åœ¨è®ºæ–‡ä¸­è¯¦ç»†é˜è¿°
2. **çŠ¶æ€æŠ½è±¡**æ˜¯å·¥ç¨‹åˆ›æ–°ï¼Œéœ€è¦è¯æ˜æœ‰é™çŠ¶æ€çš„æœ‰æ•ˆæ€§
3. **ç†µé©±åŠ¨æ¨ç†**æ˜¯æ–¹æ³•åˆ›æ–°ï¼Œéœ€è¦é€šè¿‡æ¶ˆèå®éªŒè¯æ˜å…¶ä»·å€¼

### å…³äºå·¥ç¨‹å®ç°
1. ä¼˜å…ˆå®ç°æœ€å¸¸ç”¨çš„15ä¸ªå®šç†ï¼Œç¡®ä¿åŸºç¡€åŠŸèƒ½å¯ç”¨
2. çŠ¶æ€æŠ½è±¡çš„è®¾è®¡ç›´æ¥å½±å“åç»­æ‰€æœ‰æ¨¡å—ï¼Œéœ€è¦è°¨æ…è®¾è®¡
3. ç¥ç»ç½‘ç»œå¯ä»¥å…ˆç”¨å°æ¨¡å‹å¿«é€ŸéªŒè¯ï¼Œå†æ‰©å¤§è§„æ¨¡

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-01-08  
**è´Ÿè´£äºº**: EGR Team

