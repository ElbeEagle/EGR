# Stage 2 - æ¨¡å‹ä¼˜åŒ–é˜¶æ®µæŠ¥å‘Š

**å®Œæˆæ—¶é—´**: 2026-01-17

## ğŸ“‹ ä¼˜åŒ–ç›®æ ‡

- **ä¸»è¦ç›®æ ‡**: æˆåŠŸç‡çªç ´60% (ä»58.3%)
- **å…·ä½“ä»»åŠ¡**:
  1. å¢å¼ºæ–¹ç¨‹è§£æï¼ˆæ”¯æŒéæ ‡å‡†å½¢å¼ï¼‰
  2. ä¼˜åŒ–å‰ç½®æ¡ä»¶ï¼ˆæé«˜é€‚ç”¨æ€§ï¼‰
  3. ä¿®å¤å·²çŸ¥é—®é¢˜ï¼ˆæ ·æœ¬6, 16ç­‰ï¼‰

---

## ğŸ”§ å·²å®Œæˆçš„ä¼˜åŒ–

### 1. å¢å¼ºModel 5 (åŒæ›²çº¿æ ‡å‡†æ–¹ç¨‹)

#### ä¼˜åŒ–å†…å®¹
å¢å¼ºäº†åŒæ›²çº¿æ ‡å‡†æ–¹ç¨‹çš„å‚æ•°æå–èƒ½åŠ›ï¼Œæ”¯æŒçœç•¥åˆ†æ¯çš„æƒ…å†µã€‚

#### å…·ä½“æ”¹è¿›
```python
# æ–°å¢æ”¯æŒçš„æ¨¡å¼:
# x^2/3 - y^2 = 1  (yÂ²åˆ†æ¯ä¸º1ï¼Œä¹‹å‰æ— æ³•è¯†åˆ«)
# -y^2 + x^2/A = 1  (yÂ²åˆ†æ¯ä¸º1)

# æ–°å¢æ­£åˆ™æ¨¡å¼:
pattern2 = r'x\^2/([^\s\-\+]+).*?-.*?y\^2\s*=\s*1'
pattern4 = r'-y\^2\s*\+\s*x\^2/([^\s=\)]+).*?=.*?1'
```

#### æ•ˆæœ
- ç†è®ºä¸Šå¯ä»¥è¯†åˆ«æ›´å¤šåŒæ›²çº¿æ–¹ç¨‹å˜ä½“
- ä¸ºåç»­æ ·æœ¬æä¾›æ›´å¥½çš„å‚æ•°æå–

---

## ğŸ“Š æµ‹è¯•ç»“æœ

### ä¼˜åŒ–å‰åå¯¹æ¯”

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | å˜åŒ– |
|------|--------|--------|------|
| æˆåŠŸç‡ | 58.3% | 58.3% | 0% |
| å¤±è´¥ç‡ | 38.9% | 38.9% | 0% |
| æœªå®ç° | 2.8% | 2.8% | 0% |

### æµ‹è¯•æ ·æœ¬è¯¦æƒ…

```
æµ‹è¯•æ ·æœ¬æ•°: 10
æ¨¡å‹è°ƒç”¨æ€»æ•°: 36
  - æˆåŠŸ: 21 (58.3%)
  - å¤±è´¥: 14 (38.9%)
  - æœªå®ç°: 1 (2.8%)

å¹³å‡æœ€ç»ˆå®Œæ•´åº¦: 0.61
```

---

## ğŸ” é—®é¢˜åˆ†æ

### æ ·æœ¬ ID=6 (æœªè§£å†³)

**é—®é¢˜æè¿°**:
```
é¢˜ç›®: åŒæ›²çº¿ xÂ²/3 - yÂ² = 1 çš„è™šè½´é•¿
fact_expressions: "G: Hyperbola;Expression(G) = (x^2/3 - y^2 = 1)"
æ¨¡å‹åºåˆ—: [12] (Hyperbola_Parameter_Relation)
```

**å¤±è´¥åŸå› **:
1. æ¨¡å‹åºåˆ—ä¸­**æ²¡æœ‰Model 5**ï¼Œç›´æ¥è°ƒç”¨Model 12
2. Model 12éœ€è¦å·²çŸ¥çš„å‚æ•°a, bï¼Œä½†è¿™äº›å‚æ•°æ²¡æœ‰è¢«æå–
3. Model 5çš„ä¼˜åŒ–æ— æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºModel 5æ ¹æœ¬æ²¡è¢«è°ƒç”¨

**æ ¹æœ¬åŸå› **:
- **çŠ¶æ€æ„é€ å™¨**åœ¨åˆå§‹åŒ–æ—¶æ²¡æœ‰ä»æ–¹ç¨‹è‡ªåŠ¨æå–å‚æ•°
- éœ€è¦åœ¨`parse_fact_expressions`é˜¶æ®µå°±è¯†åˆ«æ–¹ç¨‹å¹¶æå–å‚æ•°

**è§£å†³æ–¹æ¡ˆ**:
éœ€è¦å¢å¼ºçŠ¶æ€æ„é€ å™¨ï¼ˆState Constructorï¼‰ï¼Œåœ¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨ç›¸å…³æ¨¡å‹æå–å‚æ•°ã€‚

---

### æ ·æœ¬ ID=16 (æœªè§£å†³)

**é—®é¢˜æè¿°**:
```
é¢˜ç›®: æŠ›ç‰©çº¿ y = xÂ²/4
æ¨¡å‹åºåˆ—: [9, 29, 21, 13]
Model 9 (æŠ›ç‰©çº¿æ ‡å‡†æ–¹ç¨‹): âŒ å‰ç½®æ¡ä»¶ä¸æ»¡è¶³
```

**å¤±è´¥åŸå› **:
1. æ–¹ç¨‹ `y = xÂ²/4` ä¸æ˜¯æ ‡å‡†å½¢å¼
2. æ ‡å‡†å½¢å¼åº”è¯¥æ˜¯ `xÂ² = 4y`
3. Model 9 æ— æ³•è¯†åˆ«éæ ‡å‡†å½¢å¼

**è§£å†³æ–¹æ¡ˆ**:
éœ€è¦å®ç°**æ–¹ç¨‹æ ‡å‡†åŒ–é¢„å¤„ç†å™¨**:
```python
def standardize_equation(eq):
    """
    y = xÂ²/4  â†’  xÂ² = 4y
    y = axÂ²   â†’  xÂ² = y/a
    """
```

---

## ğŸ’¡ æ ¸å¿ƒå‘ç°

### ä¸ºä»€ä¹ˆæˆåŠŸç‡æ²¡æœ‰æå‡ï¼Ÿ

1. **æ¨¡å‹åºåˆ—é™åˆ¶**
   - æµ‹è¯•ä½¿ç”¨çš„æ˜¯é¢„å®šä¹‰çš„æ¨¡å‹åºåˆ—
   - æ ·æœ¬6çš„åºåˆ—æ˜¯[12]ï¼Œæ ¹æœ¬ä¸è°ƒç”¨Model 5
   - ä¼˜åŒ–Model 5æ— æ³•å½±å“è¿™ä¸ªæ ·æœ¬

2. **çŠ¶æ€åˆå§‹åŒ–ä¸è¶³**
   - å½“å‰æ¶æ„ï¼šfact_expressions â†’ SymbolicState â†’ åº”ç”¨æ¨¡å‹
   - é—®é¢˜ï¼šæŸäº›å‚æ•°åº”è¯¥åœ¨åˆå§‹åŒ–æ—¶å°±æå–
   - æ ·æœ¬6éœ€è¦ï¼šæ–¹ç¨‹è§£æ â†’ å‚æ•°æå– â†’ Model 12

3. **æ¶æ„å±‚é¢çš„é™åˆ¶**
   - éœ€è¦çŠ¶æ€æ„é€ å™¨ä¸»åŠ¨è¯†åˆ«å’Œæå–
   - å•ä¸ªæ¨¡å‹çš„ä¼˜åŒ–å½±å“æœ‰é™

---

## ğŸ¯ æ”¹è¿›æ–¹å‘

### çŸ­æœŸæ”¹è¿›ï¼ˆç«‹å³å¯åšï¼‰

#### 1. å¢å¼ºçŠ¶æ€æ„é€ å™¨
```python
class StateConstructor:
    def parse_fact_expressions(self, facts):
        # å½“å‰ï¼šåªè§£æå®ä½“å’Œå…³ç³»
        # æ”¹è¿›ï¼šè‡ªåŠ¨è°ƒç”¨æ ‡å‡†æ–¹ç¨‹æ¨¡å‹æå–å‚æ•°
        
        state = SymbolicState(...)
        
        # ğŸ†• æ–°å¢ï¼šä¸»åŠ¨å‚æ•°æå–
        if has_equation(state):
            self._extract_equation_parameters(state)
        
        return state
    
    def _extract_equation_parameters(self, state):
        """ä»æ–¹ç¨‹ä¸­æå–å‚æ•°"""
        # å°è¯•åº”ç”¨æ‰€æœ‰æ ‡å‡†æ–¹ç¨‹æ¨¡å‹
        for model_id in [3, 4, 5, 6, 7, 8, 9, 10]:
            model = library.get_model(model_id)
            if model and model.can_apply(state):
                model.apply(state)
```

#### 2. å®ç°æ–¹ç¨‹æ ‡å‡†åŒ–
```python
class EquationNormalizer:
    def normalize(self, equation):
        """
        æ ‡å‡†åŒ–æ–¹ç¨‹
        
        æ”¯æŒï¼š
        - y = xÂ²/4  â†’  xÂ² = 4y
        - yÂ² = 1    â†’  yÂ²/1 = 1
        - 4xÂ² + 9yÂ² = 36  â†’  xÂ²/9 + yÂ²/4 = 1
        """
```

### ä¸­æœŸæ”¹è¿›ï¼ˆéœ€è¦é‡æ„ï¼‰

1. **æ¨¡å‹åºåˆ—è‡ªåŠ¨ç”Ÿæˆ**
   - å½“å‰ï¼šä½¿ç”¨é¢„å®šä¹‰åºåˆ—
   - æ”¹è¿›ï¼šæ ¹æ®çŠ¶æ€åŠ¨æ€é€‰æ‹©æ¨¡å‹

2. **åŒå±‚æ¨¡å‹è°ƒç”¨**
   - ç¬¬ä¸€å±‚ï¼šåˆå§‹åŒ–æ—¶è‡ªåŠ¨æå–ï¼ˆæ ‡å‡†æ–¹ç¨‹æ¨¡å‹ï¼‰
   - ç¬¬äºŒå±‚ï¼šæ¨ç†æ—¶æŒ‰éœ€åº”ç”¨ï¼ˆå…³ç³»æ¨å¯¼æ¨¡å‹ï¼‰

3. **æ™ºèƒ½å‰ç½®æ¡ä»¶**
   - å½“å‰ï¼šä¸¥æ ¼çš„å‰ç½®æ¡ä»¶æ£€æŸ¥
   - æ”¹è¿›ï¼šå°è¯•æ€§åº”ç”¨ï¼Œå¤±è´¥åˆ™å›æ»š

---

## âœ… æœ¬é˜¶æ®µæˆæœ

### å·²å®Œæˆ

1. âœ… **Model 5ä¼˜åŒ–å®Œæˆ**
   - æ”¯æŒçœç•¥åˆ†æ¯çš„åŒæ›²çº¿æ–¹ç¨‹
   - ä»£ç è´¨é‡è‰¯å¥½
   - ä¸ºæœªæ¥ä½¿ç”¨åšå¥½å‡†å¤‡

2. âœ… **é—®é¢˜æ ¹æºè¯†åˆ«**
   - æ˜ç¡®äº†æ ·æœ¬6, 16å¤±è´¥çš„çœŸæ­£åŸå› 
   - è¯†åˆ«äº†æ¶æ„å±‚é¢çš„é™åˆ¶
   - è§„åˆ’äº†æ”¹è¿›è·¯çº¿

3. âœ… **æ”¹è¿›æ–¹å‘æ˜ç¡®**
   - çŸ­æœŸï¼šå¢å¼ºçŠ¶æ€æ„é€ å™¨
   - ä¸­æœŸï¼šæ–¹ç¨‹æ ‡å‡†åŒ–
   - é•¿æœŸï¼šæ¶æ„ä¼˜åŒ–

### å±€é™æ€§

1. âš ï¸ **æˆåŠŸç‡æœªæå‡**
   - ç›®æ ‡60%ï¼Œå®é™…58.3%
   - åŸå› ï¼šé—®é¢˜åœ¨æ›´åº•å±‚

2. âš ï¸ **æ ·æœ¬6, 16æœªè§£å†³**
   - éœ€è¦çŠ¶æ€æ„é€ å™¨æ”¹è¿›
   - è¶…å‡ºå•ä¸ªæ¨¡å‹ä¼˜åŒ–èŒƒå›´

---

## ğŸ“ ç»éªŒæ€»ç»“

### å…³é”®è®¤è¯†

1. **ä¼˜åŒ–ä¸ç­‰äºæå‡**
   - æ¨¡å‹ä¼˜åŒ–ä¸ä¸€å®šç«‹å³æå‡æˆåŠŸç‡
   - éœ€è¦æ•´ä½“æ¶æ„é…åˆ

2. **æ¶æ„å¾ˆé‡è¦**
   - 30ä¸ªæ¨¡å‹å·²ç»å¾ˆä¸°å¯Œ
   - ä½†æ¶æ„é™åˆ¶äº†æ¨¡å‹çš„ä½œç”¨å‘æŒ¥

3. **æµ‹è¯•é©±åŠ¨å¼€å‘**
   - é€šè¿‡çœŸå®æ ·æœ¬å‘ç°é—®é¢˜
   - å®šä½åˆ°æ¶æ„å±‚é¢çš„æ”¹è¿›éœ€æ±‚

### ä¸‹ä¸€æ­¥å»ºè®®

#### é€‰é¡¹A: ç»§ç»­æ‰©å±•æ¨¡å‹ï¼ˆæ¨èæš‚ç¼“ï¼‰
- å½“å‰30ä¸ªæ¨¡å‹å·²ç»è¶³å¤Ÿ
- ç»§ç»­æ‰©å±•å¯¹æˆåŠŸç‡å¸®åŠ©æœ‰é™
- åº”å…ˆä¼˜åŒ–æ¶æ„

#### é€‰é¡¹B: ä¼˜åŒ–æ¶æ„ï¼ˆå¼ºçƒˆæ¨èï¼‰
1. **å¢å¼ºçŠ¶æ€æ„é€ å™¨**
   - è‡ªåŠ¨æå–æ–¹ç¨‹å‚æ•°
   - ä¸»åŠ¨è°ƒç”¨æ ‡å‡†æ–¹ç¨‹æ¨¡å‹
   - é¢„è®¡æˆåŠŸç‡æå‡è‡³65%+

2. **å®ç°æ–¹ç¨‹æ ‡å‡†åŒ–**
   - å¤„ç†éæ ‡å‡†å½¢å¼
   - ç»Ÿä¸€æ–¹ç¨‹è¡¨ç¤º
   - è§£å†³æ ·æœ¬16ç±»é—®é¢˜

3. **ä¼˜åŒ–å‰ç½®æ¡ä»¶**
   - æ›´çµæ´»çš„åˆ¤æ–­
   - å°è¯•æ€§åº”ç”¨
   - æé«˜æ¨¡å‹é€‚ç”¨æ€§

#### é€‰é¡¹C: åˆ›å»ºæ€»ç»“æ–‡æ¡£ï¼ˆæœ¬é˜¶æ®µï¼‰
- æ•´ç†30ä¸ªæ¨¡å‹çš„å®Œæ•´æ–‡æ¡£
- åˆ›å»ºæ¨¡å‹ä½¿ç”¨æŒ‡å—
- ç¼–å†™APIå‚è€ƒæ‰‹å†Œ

---

## ğŸ¯ æˆåŠŸç‡çªç ´60%è·¯çº¿å›¾

### Phase 1: æ¶æ„å¢å¼ºï¼ˆé¢„è®¡+5-7%ï¼‰

```python
# 1. çŠ¶æ€æ„é€ å™¨å¢å¼º
StateConstructor.parse_fact_expressions()
  â””â”€> _extract_equation_parameters()
      â””â”€> è‡ªåŠ¨åº”ç”¨æ ‡å‡†æ–¹ç¨‹æ¨¡å‹

# 2. æ–¹ç¨‹æ ‡å‡†åŒ–
EquationNormalizer.normalize()
  â””â”€> è¯†åˆ«å¹¶è½¬æ¢éæ ‡å‡†å½¢å¼
```

**é¢„æœŸæ•ˆæœ**: 58.3% â†’ 63-65%

### Phase 2: æ¨¡å‹ååŒï¼ˆé¢„è®¡+3-5%ï¼‰

```python
# 1. æ¨¡å‹ä¾èµ–å£°æ˜
Model.requires = [list_of_prerequisite_models]

# 2. è‡ªåŠ¨ä¾èµ–è§£æ
if model.can_apply() but prerequisites_missing:
    apply_prerequisites_first()
```

**é¢„æœŸæ•ˆæœ**: 63-65% â†’ 66-70%

### Phase 3: æ™ºèƒ½æ¨ç†ï¼ˆé¢„è®¡+5-8%ï¼‰

```python
# 1. åŠ¨æ€æ¨¡å‹åºåˆ—
generate_model_sequence(state, query)

# 2. å¯å‘å¼æœç´¢
find_optimal_path(current_state, target_state)
```

**é¢„æœŸæ•ˆæœ**: 66-70% â†’ 71-78%

---

## ğŸ“Š æœ€ç»ˆç»Ÿè®¡

### ä¼˜åŒ–é˜¶æ®µæ€»ç»“

```
æ¨¡å‹åº“çŠ¶æ€: 30/80 (37.5%)
ä¼˜åŒ–æ¨¡å‹æ•°: 1 (Model 5)
æˆåŠŸç‡: 58.3% (ä¿æŒç¨³å®š)
æµ‹è¯•é€šè¿‡ç‡: 100% (æ— å›å½’)
```

### ä¸‹ä¸€é˜¶æ®µç›®æ ‡

```
ä¼˜åŒ–æ–¹å‘: æ¶æ„å±‚é¢æ”¹è¿›
ç›®æ ‡æˆåŠŸç‡: 65%+
é¢„è®¡å·¥ä½œé‡: ä¸­ç­‰
ä¼˜å…ˆçº§: é«˜
```

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-01-17  
**ä¼˜åŒ–è€…**: EGR Team  
**ç»“è®º**: æ¨¡å‹ä¼˜åŒ–å®Œæˆï¼Œè¯†åˆ«æ¶æ„æ”¹è¿›éœ€æ±‚  
**å»ºè®®**: è½¬å‘æ¶æ„ä¼˜åŒ–ä»¥çªç ´60%æˆåŠŸç‡
