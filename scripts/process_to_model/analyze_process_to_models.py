"""
手动分析推理过程并转换为模型序列
需要仔细识别每个推理步骤使用的定理和方法
"""
import json
import re

def analyze_process_manual():
    """手动分析样本，建立模型映射"""
    
    # 这里我将手动标注每个样本使用的模型
    # 格式: sample_id: [model_ids]
    
    manual_annotations = {
        # [2] 双曲线渐近线问题
        "2": [5, 21, 13],  # 双曲线标准方程, 渐近线方程, 离心率
        
        # [4] 双曲线焦点到渐近线距离
        "4": [22, 12, 13, 24],  # 焦点到渐近线距离=b, 双曲线参数关系, 离心率, 等轴双曲线
        
        # [5] 抛物线定义和焦半径
        "5": [9, 2, 17, 29],  # 抛物线方程(向上), 抛物线定义, 焦半径, 准线
        
        # [6] 双曲线参数关系
        "6": [12],  # 双曲线参数关系
        
        # [7] 椭圆参数关系和焦距
        "7": [3, 11],  # 椭圆标准方程, 椭圆参数关系
        
        # [9] 椭圆定义
        "9": [0, 3],  # 椭圆定义, 椭圆标准方程
        
        # [11] 抛物线+圆+基本不等式
        "11": [7, 75, 53, 63, 64, 62],  # 抛物线, 圆方程, 两点距离, 基本不等式, 取等条件, 向量共线
        
        # [13] 双曲线定义+内切圆+三角形面积
        "13": [1, 70, 56, 13],  # 双曲线定义, 内切圆半径, 三角形面积, 离心率
        
        # [14] 双曲线通径+离心率
        "14": [19, 47, 12, 13],  # 双曲线通径, 余弦定理, 双曲线参数关系, 离心率
        
        # [16] 抛物线准线+双曲线渐近线+离心率
        "16": [9, 29, 21, 13],  # 抛物线标准方程, 准线, 渐近线, 离心率
        
        # [18] 抛物线方程+焦点+两点距离
        "18": [8, 53],  # 抛物线(向左), 两点距离
        
        # [19] 抛物线焦半径
        "19": [17],  # 抛物线焦半径
        
        # [20] 抛物线焦点和标准方程
        "20": [7, 17],  # 抛物线标准方程, 焦半径公式
        
        # [24] 双曲线点差法
        "24": [5, 46, 55, 72],  # 双曲线标准方程, 双曲线点差法, 斜率公式, 点斜式
        
        # [26] 抛物线定义
        "26": [2, 29, 17],  # 抛物线定义, 准线, 焦半径
        
        # [27] 勾股定理+双曲线定义+离心率
        "27": [49, 1, 13],  # 勾股定理, 双曲线定义, 离心率
        
        # [29] 椭圆定义+余弦定理+三角形面积
        "29": [0, 47, 57],  # 椭圆定义, 余弦定理, 三角形面积(正弦)
        
        # [30] 抛物线焦点和准线
        "30": [7, 29],  # 抛物线标准方程, 准线
        
        # [31] 抛物线+韦达定理+向量+三角形面积
        "31": [7, 78, 42, 43, 62, 58],  # 抛物线, x=my+n设法, 韦达定理和, 韦达定理积, 向量共线, 面积坐标公式
        
        # [32] 椭圆定义+通径
        "32": [0, 18],  # 椭圆定义, 椭圆通径
    }
    
    return manual_annotations

if __name__ == '__main__':
    annotations = analyze_process_manual()
    print(f"已标注 {len(annotations)} 个样本")
    
    # 保存到临时文件
    with open('data/data_process/manual_annotations_sample.json', 'w', encoding='utf-8') as f:
        json.dump(annotations, f, ensure_ascii=False, indent=2)
    
    print("样本标注已保存")

