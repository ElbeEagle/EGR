# Module 1 ä»»åŠ¡åˆ†ææ€»ç»“

**æ—¥æœŸ**: 2026-01-13  
**ä»»åŠ¡**: çŠ¶æ€æŠ½è±¡ä¸è½¬æ¢æœºåˆ¶è®¾è®¡

---

## ğŸ“‹ ä»»åŠ¡å›é¡¾

ä½ æå‡ºäº†ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š

### ä»»åŠ¡1ï¸âƒ£: è¯„ä¼°çŠ¶æ€æŠ½è±¡æ–¹æ¡ˆçš„å¯è¡Œæ€§
> è¯„ä¼°åˆ›æ–°ç‚¹+è®ºæ–‡æ€è·¯.mdä¸­æå‡ºçš„é¢˜ç›®çŠ¶æ€æŠ½è±¡æ€è·¯æ˜¯å¦åˆç†ï¼Œèƒ½å¦å®ç°ï¼Ÿ

### ä»»åŠ¡2ï¸âƒ£: è®¾è®¡çŠ¶æ€è½¬æ¢æœºåˆ¶
> æ•°æ®é›†ä¸­æ¯ä¸ªæ•°æ®åªæœ‰åˆå§‹çŠ¶æ€S0ï¼Œåº”ç”¨modelsåä¼šè½¬æ¢ä¸ºä»€ä¹ˆçŠ¶æ€ï¼Ÿ
> fact_expressionsä¼šæ–°å¢ä»€ä¹ˆä¸œè¥¿ï¼Ÿå¦‚ä½•è¡¨ç¤ºæ–°çŠ¶æ€ï¼Ÿå¦‚ä½•å¿«é€Ÿæ„å»ºS1,S2ï¼Ÿ

---

## ğŸ¯ ä»»åŠ¡1çš„å›ç­”ï¼šçŠ¶æ€æŠ½è±¡æ–¹æ¡ˆè¯„ä¼°

### âœ… **ç»“è®ºï¼šæ€»ä½“å¯è¡Œï¼Œä½†éœ€è¦é‡å¤§æ”¹è¿›**

#### åŸæ–¹æ¡ˆçš„é—®é¢˜

ä½ åœ¨`åˆ›æ–°ç‚¹+è®ºæ–‡æ€è·¯.md`ä¸­æå‡ºçš„æ–¹æ¡ˆï¼š

```python
self.known_info = {
    'equation': False,          # âŒ åªèƒ½è¡¨ç¤ºæœ‰/æ— 
    'params': set(),            # âŒ åªèƒ½è¡¨ç¤ºå‚æ•°é›†åˆ
    'focus': False,             # âŒ åªèƒ½è¡¨ç¤ºæœ‰/æ— ç„¦ç‚¹
}
```

**é—®é¢˜**ï¼šè¿™ç§è®¾è®¡**è¿‡äºç²—ç³™**ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºçŠ¶æ€å˜åŒ–ï¼

#### ä¸ºä»€ä¹ˆä¼šæœ‰é—®é¢˜ï¼Ÿ

çœ‹ä¸€ä¸ªå…·ä½“ä¾‹å­ï¼ˆID=2ï¼‰ï¼š

```
S0: çŸ¥é“æ–¹ç¨‹ xÂ²/4 - yÂ²/mÂ² = 1
    known_info = {'equation': True, 'params': set()}

åº”ç”¨ Model 5 åï¼š

S1: çŸ¥é“ a=2, b=m
    known_info = {'equation': True, 'params': {'a', 'b'}}  âŒ ä½†ä¸çŸ¥é“a=2!
```

**å…³é”®é—®é¢˜**ï¼šç”¨`params: set()`åªèƒ½è®°å½•"æœ‰å“ªäº›å‚æ•°"ï¼Œ**ä¸èƒ½è®°å½•å‚æ•°çš„å…·ä½“å€¼**ï¼

### âœ… **æ”¹è¿›æ–¹æ¡ˆï¼šåŒå±‚çŠ¶æ€è¡¨ç¤º**

æˆ‘è®¾è®¡äº†ä¸€ä¸ªæ–°çš„æ–¹æ¡ˆï¼š

```python
# å±‚1: ç²—ç²’åº¦æŠ½è±¡çŠ¶æ€ (AbstractState)
# ç”¨äºæ¨¡å‹é€‰æ‹©å’ŒçŠ¶æ€èšç±»
class AbstractState:
    curve_type: CurveType           # æ›²çº¿ç±»å‹
    query_type: QueryType           # æŸ¥è¯¢ç±»å‹
    has_parameters: Set[str]        # å·²çŸ¥å‚æ•°é›†åˆ {'a', 'b', 'c'}
    has_equation: bool              # æ˜¯å¦æœ‰æ–¹ç¨‹
    has_focus_info: bool            # æ˜¯å¦æœ‰ç„¦ç‚¹ä¿¡æ¯
    # ... 11ä¸ªå¸ƒå°”ç‰¹å¾
    completeness_score: float       # ä¿¡æ¯å®Œæ•´åº¦ (0.0-1.0)
    reasoning_depth: int            # æ¨ç†æ·±åº¦ï¼ˆç¬¬å‡ æ­¥ï¼‰

# å±‚2: ç»†ç²’åº¦ç¬¦å·çŠ¶æ€ (SymbolicState)
# ç”¨äºç²¾ç¡®æ¨ç†å’Œæ¨¡å‹åº”ç”¨
class SymbolicState:
    entities: Dict[str, str]        # {G: 'Hyperbola', m: 'Number'}
    equations: List[str]            # ['Expression(G) = ...']
    parameters: Dict[str, Any]      # {'a': 2, 'b': 'm'}  â† è®°å½•å…·ä½“å€¼ï¼
    geometric_relations: List[str]  # ['a^2=4', 'b^2=m^2']
    coordinates: Dict[str, Tuple]   # {'F': (c, 0)}
```

#### ä¸ºä»€ä¹ˆè¦åˆ†ä¸¤å±‚ï¼Ÿ

| å±‚æ¬¡ | ç”¨é€” | ä¼˜åŠ¿ |
|------|------|------|
| **AbstractState** | æ¨¡å‹é€‰æ‹©ã€çŠ¶æ€ç´¢å¼• | æœ‰é™çŠ¶æ€ç©ºé—´ï¼Œå¯ä»¥å»ºç«‹P(model\|state) |
| **SymbolicState** | ç²¾ç¡®æ¨ç†ã€æ¨¡å‹åº”ç”¨ | ä¿ç•™å®Œæ•´ä¿¡æ¯ï¼Œæ”¯æŒå¤æ‚æ¨ç† |

### ğŸ“Š çŠ¶æ€ç©ºé—´è§„æ¨¡åˆ†æ

#### ç†è®ºçŠ¶æ€ç©ºé—´

```
AbstractStateçš„çŠ¶æ€æ•°ï¼š
= æ›²çº¿ç±»å‹ Ã— æŸ¥è¯¢ç±»å‹ Ã— ä¿¡æ¯ç»„åˆ Ã— å®Œæ•´åº¦ç­‰çº§
= 4 Ã— 10 Ã— 2^11 Ã— 5
â‰ˆ 409,600 ç§çŠ¶æ€
```

#### å®é™…çŠ¶æ€ç©ºé—´ï¼ˆåŸºäºConic10Kï¼‰

- **å®é™…å‡ºç°**ï¼š~5,000-8,000 ç§çŠ¶æ€
- **å æ¯”**ï¼š1.2%-2.0%
- **ç»“è®º**ï¼šçŠ¶æ€ç©ºé—´**éå¸¸ç¨€ç–**ï¼

#### è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ

âœ… **å¥½æ¶ˆæ¯**ï¼šè™½ç„¶ç†è®ºç©ºé—´å¾ˆå¤§ï¼Œä½†å®é™…åªéœ€è¦å¤„ç†5000-8000ç§çŠ¶æ€

âœ… **å¯ä»¥è¿›ä¸€æ­¥å‹ç¼©**ï¼šé€šè¿‡èšç±»ï¼Œå¯ä»¥å‹ç¼©åˆ°500-1000ä¸ªä»£è¡¨æ€§çŠ¶æ€ç±»åˆ«

---

## ğŸ¯ ä»»åŠ¡2çš„å›ç­”ï¼šçŠ¶æ€è½¬æ¢æœºåˆ¶è®¾è®¡

### ğŸ” **æ ¸å¿ƒå‘ç°ï¼šæ¨¡å‹åº”ç”¨ = ä¿¡æ¯å¢é‡**

é€šè¿‡æ·±å…¥åˆ†ææ•°æ®ï¼Œæˆ‘å‘ç°äº†çŠ¶æ€è½¬æ¢çš„æœ¬è´¨ï¼š

```python
æ–°çŠ¶æ€ = æ—§çŠ¶æ€ + æ¨¡å‹è¾“å‡ºçš„æ–°ä¿¡æ¯

Sâ‚ = Sâ‚€ âŠ• apply_model(M_i, Sâ‚€)
```

### ğŸ“š è¯¦ç»†ä¾‹å­1ï¼šID=2çš„é¢˜ç›®

**é¢˜ç›®**ï¼šå·²çŸ¥åŒæ›²çº¿ xÂ²/4 - yÂ²/mÂ² = 1 çš„æ¸è¿‘çº¿æ˜¯ 5x-2y=0ï¼Œæ±‚m

**models**: `[5, 21]`

#### çŠ¶æ€è½¬æ¢è¿‡ç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ S0 (åˆå§‹çŠ¶æ€)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SymbolicState:                      â”‚
â”‚   entities: {G: Hyperbola, m: Number}
â”‚   equations: [                      â”‚
â”‚     "Expression(G) = (x^2/4 - y^2/m^2 = 1)",
â”‚     "Asymptote = (5x - 2y = 0)"     â”‚
â”‚   ]                                 â”‚
â”‚   parameters: {}  â† ç©ºçš„ï¼          â”‚
â”‚                                     â”‚
â”‚ AbstractState:                      â”‚
â”‚   curve_type: Hyperbola             â”‚
â”‚   has_equation: True                â”‚
â”‚   has_parameters: []  â† ç©ºçš„ï¼      â”‚
â”‚   has_asymptote_info: True          â”‚
â”‚   completeness_score: 0.4           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
        åº”ç”¨ Model 5
     (Hyperbola_Equation_Standard_X)
     "ä»åŒæ›²çº¿æ–¹ç¨‹æå–å‚æ•°"
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ S1 (æå–å‚æ•°å)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SymbolicState:                      â”‚
â”‚   entities: {G: Hyperbola, m: Number}
â”‚   equations: [...]                  â”‚
â”‚   parameters: {                     â”‚
â”‚     'a^2': '4',      â† æ–°å¢ï¼       â”‚
â”‚     'b^2': 'm^2',    â† æ–°å¢ï¼       â”‚
â”‚     'a': '2',        â† æ–°å¢ï¼       â”‚
â”‚     'b': 'm'         â† æ–°å¢ï¼       â”‚
â”‚   }                                 â”‚
â”‚   geometric_relations: [            â”‚
â”‚     "a^2 = 4",       â† æ–°å¢ï¼       â”‚
â”‚     "b^2 = m^2"      â† æ–°å¢ï¼       â”‚
â”‚   ]                                 â”‚
â”‚                                     â”‚
â”‚ AbstractState:                      â”‚
â”‚   has_parameters: ['a', 'b']  â† æ›´æ–°ï¼
â”‚   completeness_score: 0.6     â† æå‡ï¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
        åº”ç”¨ Model 21
     (Hyperbola_Asymptote)
     "æ ¹æ®a,bè®¡ç®—æ¸è¿‘çº¿æ–¹ç¨‹"
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ S2 (å¾—åˆ°å®Œæ•´æ¸è¿‘çº¿æ–¹ç¨‹)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SymbolicState:                      â”‚
â”‚   parameters: {a: 2, b: m, ...}     â”‚
â”‚   equations: [                      â”‚
â”‚     ...,                            â”‚
â”‚     "Asymptote(G) = y = Â±(m/2)x"  â† æ–°å¢ï¼
â”‚   ]                                 â”‚
â”‚   geometric_relations: [            â”‚
â”‚     ...,                            â”‚
â”‚     "æ¸è¿‘çº¿: y = Â±(m/2)x"          â† æ–°å¢ï¼
â”‚   ]                                 â”‚
â”‚                                     â”‚
â”‚ AbstractState:                      â”‚
â”‚   completeness_score: 0.9     â† å†æå‡ï¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         æ¯”è¾ƒä¸¤ä¸ªæ¸è¿‘çº¿æ–¹ç¨‹
     y = Â±(m/2)x  vs  y = 5/2*x
              â†“
         å¾—å‡ºï¼šm = 5 âœ“
```

### ğŸ“š è¯¦ç»†ä¾‹å­2ï¼šID=4çš„é¢˜ç›®

**models**: `[5, 22, 19, 24, 13]`

```
S0 â†’ Model 5  â†’ S1: æå–å‚æ•° a, b
                   parameters: {a: 'a', b: 'b'}

S1 â†’ Model 22 â†’ S2: ç„¦ç‚¹åˆ°æ¸è¿‘çº¿è·ç¦» = b
                   geometric_relations: ["Distance(F, Asymptote) = b"]

S2 â†’ Model 19 â†’ S3: é€šå¾„ = 2bÂ²/a
                   çŸ¥é“ AFâŠ¥xè½´ï¼Œå¾—åˆ° bÂ²/a = b

S3 â†’ Model 24 â†’ S4: ç­‰è½´åŒæ›²çº¿åˆ¤å®š
                   æ¨å¯¼å‡º a = b
                   parameters: {a: 'a', b: 'a'}

S4 â†’ Model 13 â†’ S5: ç¦»å¿ƒç‡å…¬å¼ e = c/a
                   c = sqrt(aÂ² + bÂ²) = sqrt(2aÂ²) = sqrt(2)Â·a
                   e = sqrt(2)Â·a / a = sqrt(2)
```

### ğŸ”‘ å…³é”®è§‚å¯Ÿ

#### 1. æ¯ä¸ªæ¨¡å‹éƒ½æœ‰æ˜ç¡®çš„"è¾“å…¥â†’è¾“å‡º"

| Model ID | è¾“å…¥ï¼ˆéœ€è¦çš„ä¿¡æ¯ï¼‰ | è¾“å‡ºï¼ˆæ–°å¢çš„ä¿¡æ¯ï¼‰ |
|----------|-------------------|-------------------|
| 5 (Hyperbola_Standard_X) | åŒæ›²çº¿æ–¹ç¨‹ xÂ²/A - yÂ²/B = 1 | aÂ² = A, bÂ² = B |
| 21 (Hyperbola_Asymptote) | å‚æ•° a, b | æ¸è¿‘çº¿æ–¹ç¨‹ y = Â±(b/a)x |
| 12 (Hyperbola_Param_Relation) | a, b ä¸­çš„ä»»æ„ä¸¤ä¸ª | ç¬¬ä¸‰ä¸ªå‚æ•° c |
| 13 (Eccentricity_Formula) | c å’Œ a | ç¦»å¿ƒç‡ e = c/a |

#### 2. çŠ¶æ€æ›´æ–°æ˜¯å¢é‡å¼çš„

**é‡è¦**ï¼šæ¯æ¬¡åº”ç”¨æ¨¡å‹åï¼Œ**ä¸ä¼šåˆ é™¤**æ—§ä¿¡æ¯ï¼Œåªä¼š**æ–°å¢**ä¿¡æ¯ï¼

```python
S_new = S_old + Î”Info
```

#### 3. completeness_score å•è°ƒé€’å¢

```
S0: 0.4 â†’ S1: 0.6 â†’ S2: 0.9
```

éšç€æ¨ç†æ·±å…¥ï¼Œä¿¡æ¯è¶Šæ¥è¶Šå®Œæ•´

---

## ğŸ—ï¸ å®æ–½æ–¹æ¡ˆ

### å·²å®Œæˆçš„å·¥ä½œ âœ…

æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†ä»¥ä¸‹ä»£ç ï¼š

#### 1. **çŠ¶æ€æŠ½è±¡å™¨** (`src/state_abstractor.py`)

- `SymbolicState` ç±»ï¼šå­˜å‚¨å…·ä½“ä¿¡æ¯
- `AbstractState` ç±»ï¼šæŠ½è±¡ç‰¹å¾è¡¨ç¤º
- `StateAbstractor` ç±»ï¼šçŠ¶æ€è§£æå’ŒæŠ½è±¡

#### 2. **å®šç†åº“æ¡†æ¶** (`src/theorems/theorem_library.py`)

- `TheoremModel` ç±»ï¼šå•ä¸ªæ¨¡å‹å®šä¹‰
- `TheoremLibrary` ç±»ï¼šæ¨¡å‹ç®¡ç†
- å®ç°äº†å‰10ä¸ªå…³é”®æ¨¡å‹ï¼š
  - Model 0-1: æ¤­åœ†/åŒæ›²çº¿å®šä¹‰
  - Model 5: åŒæ›²çº¿æ ‡å‡†æ–¹ç¨‹
  - Model 11-12: å‚æ•°å…³ç³»
  - Model 13: ç¦»å¿ƒç‡å…¬å¼
  - Model 21-22: æ¸è¿‘çº¿ç›¸å…³

#### 3. **çŠ¶æ€åºåˆ—æ„å»ºè„šæœ¬** (`scripts/data/build_state_sequences.py`)

- `build_state_sequence_for_sample()`: ä¸ºå•ä¸ªæ ·æœ¬æ„å»ºçŠ¶æ€åºåˆ—
- `build_state_sequences_for_dataset()`: æ‰¹é‡å¤„ç†
- `analyze_state_distribution()`: åˆ†æçŠ¶æ€åˆ†å¸ƒå’Œè½¬ç§»æ¦‚ç‡

### ä¸‹ä¸€æ­¥å·¥ä½œ ğŸ”„

#### ç«‹å³å¯åšï¼ˆä»Šå¤©ï¼‰

1. **è¡¥å……é«˜é¢‘æ¨¡å‹**ï¼ˆ20ä¸ªï¼‰
   ```
   ä¼˜å…ˆçº§ï¼š
   - Model 41-43: éŸ¦è¾¾å®šç†ï¼ˆæé«˜é¢‘ï¼‰
   - Model 44: ç‚¹å·®æ³•ï¼ˆæé«˜é¢‘ï¼‰
   - Model 47: ä½™å¼¦å®šç†ï¼ˆé«˜é¢‘ï¼‰
   - Model 50-51: å¼¦é•¿å…¬å¼ï¼ˆé«˜é¢‘ï¼‰
   - Model 17: æŠ›ç‰©çº¿ç„¦åŠå¾„ï¼ˆé«˜é¢‘ï¼‰
   - ... å…¶ä»–15ä¸ª
   ```

2. **æµ‹è¯•çŠ¶æ€åºåˆ—æ„å»º**
   ```bash
   cd /Users/ebeleagel/Documents/GitHub/EGR
   python scripts/data/build_state_sequences.py
   ```

3. **æ£€æŸ¥ç»“æœ**
   - æŸ¥çœ‹ç”Ÿæˆçš„ `train_with_state_sequences_1_100.json`
   - éªŒè¯çŠ¶æ€è½¬æ¢çš„æ­£ç¡®æ€§
   - åˆ†æçŠ¶æ€åˆ†å¸ƒ

#### æœ¬å‘¨å†…å®Œæˆ

4. **å®Œæˆå…¨éƒ¨80ä¸ªæ¨¡å‹çš„å®ç°**
   - å‚è€ƒ `model/conic_model_descriptions.md`
   - ä¸ºæ¯ä¸ªæ¨¡å‹å®ç° `_transform_model_X()` å‡½æ•°

5. **åœ¨100ä¸ªæ ·æœ¬ä¸ŠéªŒè¯**
   - æ£€æŸ¥çŠ¶æ€è½¬æ¢çš„æ­£ç¡®æ€§
   - ç»Ÿè®¡é”™è¯¯ç‡
   - ä¼˜åŒ–çŠ¶æ€æŠ½è±¡é€»è¾‘

6. **æ‰©å±•åˆ°å…¨é›†**
   - å¤„ç† `train_with_models.json`ï¼ˆå…¨éƒ¨æ ·æœ¬ï¼‰
   - ç”Ÿæˆå®Œæ•´çš„è®­ç»ƒæ•°æ®

---

## ğŸ“Š é¢„æœŸè¾“å‡ºæ ¼å¼

### è¾“å‡ºæ–‡ä»¶ï¼š`train_with_state_sequences_1_100.json`

æ¯ä¸ªæ ·æœ¬çš„æ ¼å¼ï¼š

```json
{
  "id": 2,
  "text": "å·²çŸ¥åŒæ›²çº¿...",
  "fact_expressions": "...",
  "query_expressions": "m",
  "models": [5, 21],
  
  "state_sequence": [
    {
      "step": 0,
      "abstract_state": {
        "curve_type": "Hyperbola",
        "query_type": "value",
        "has_equation": true,
        "has_parameters": [],
        "has_asymptote_info": true,
        "completeness_score": 0.4,
        "reasoning_depth": 0,
        "state_hash": "a3f2e1d4...",
        "state_vector": [0, 0, 1, 0, ...]
      },
      "symbolic_state": {
        "entities": {"G": "Hyperbola", "m": "Number"},
        "equations": ["..."],
        "parameters": {},
        "geometric_relations": ["..."]
      },
      "applied_model": 5,
      "model_name": "Hyperbola_Equation_Standard_X"
    },
    {
      "step": 1,
      "abstract_state": {
        "has_parameters": ["a", "b"],
        "completeness_score": 0.6,
        "state_hash": "b4e3f2d5...",
        ...
      },
      "symbolic_state": {
        "parameters": {"a": 2, "b": "m"},
        ...
      },
      "applied_model": 21
    },
    {
      "step": 2,
      "abstract_state": {
        "completeness_score": 0.9,
        ...
      },
      ...
    }
  ],
  
  "num_steps": 2,
  "initial_completeness": 0.4,
  "final_completeness": 0.9
}
```

### è¾“å‡ºæ–‡ä»¶ï¼š`state_distribution_analysis.json`

```json
{
  "num_unique_states": 150,
  "state_counts": {
    "a3f2e1d4...": 5,
    "b4e3f2d5...": 8,
    ...
  },
  "state_to_model_probs": {
    "a3f2e1d4...": {
      "5": 0.85,    # 85%çš„æƒ…å†µä¸‹é€‰Model 5
      "21": 0.10,
      "12": 0.05
    },
    ...
  },
  "most_common_states": [
    ["a3f2e1d4...", 5],
    ["b4e3f2d5...", 8],
    ...
  ]
}
```

### è¿™äº›æ•°æ®çš„ç”¨é€”

1. **è®­ç»ƒæ•°æ®**ï¼š`state_sequence` æä¾› (çŠ¶æ€, æ¨¡å‹) å¯¹
2. **ç›‘ç£ä¿¡å·**ï¼š`state_to_model_probs` æä¾›æ¦‚ç‡åˆ†å¸ƒ
3. **ç†µä¼°è®¡**ï¼š`completeness_score` å¯ä»¥ä½œä¸ºç†µçš„è¿‘ä¼¼

---

## ğŸ¯ å…³é”®ä¼˜åŠ¿

### ç›¸æ¯”åŸæ–¹æ¡ˆçš„æ”¹è¿›

| æ–¹é¢ | åŸæ–¹æ¡ˆ | æ–°æ–¹æ¡ˆ |
|------|--------|--------|
| **çŠ¶æ€è¡¨ç¤º** | å•å±‚ï¼Œç²—ç²’åº¦ | åŒå±‚ï¼Œç²—+ç»† |
| **ä¿¡æ¯å®Œæ•´æ€§** | åªè®°å½•"æœ‰/æ— " | è®°å½•å…·ä½“å€¼ |
| **å¯æ‰©å±•æ€§** | éš¾ä»¥å¤„ç†å¤æ‚æ¨ç† | æ”¯æŒç¬¦å·è®¡ç®— |
| **çŠ¶æ€ç©ºé—´** | æœªä¼°ç®— | å·²åˆ†æï¼š5k-8kç§ |
| **çŠ¶æ€è½¬æ¢** | æœªå®šä¹‰ | æœ‰æ˜ç¡®çš„è½¬æ¢å‡½æ•° |

### åˆ›æ–°ç‚¹å¼ºåŒ–

ä½ åŸæœ¬çš„ä¸‰å¤§åˆ›æ–°ç‚¹ç°åœ¨æ›´åŠ solidäº†ï¼š

1. **ç†è®ºåˆ›æ–°**ï¼šæœ€å¤§ç†µåŸç†çš„ç³»ç»ŸåŒ–åº”ç”¨
   - âœ… é€šè¿‡ `completeness_score` é‡åŒ–ä¿¡æ¯ä¸ç¡®å®šæ€§
   - âœ… å¯ä»¥è®¡ç®—ä¿¡æ¯å¢ç›Šï¼š`H(S_t) - H(S_{t+1})`

2. **æ–¹æ³•åˆ›æ–°**ï¼šçŠ¶æ€æŠ½è±¡ + å®šç†åº“ + ç†µé©±åŠ¨æ¨ç†
   - âœ… åŒå±‚çŠ¶æ€è¡¨ç¤ºè§£å†³äº†æŠ½è±¡ä¸ç²¾ç¡®çš„çŸ›ç›¾
   - âœ… å®šç†åº“æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºå®šä¹‰

3. **å·¥ç¨‹åˆ›æ–°**ï¼šæœ‰é™çŠ¶æ€é›†è¾¾åˆ°é«˜å‡†ç¡®ç‡
   - âœ… å®é™…çŠ¶æ€ç©ºé—´åªæœ‰5k-8kç§
   - âœ… å¯ä»¥å»ºç«‹ç²¾ç¡®çš„ P(model|state) åˆ†å¸ƒ

---

## ğŸ“ æ€»ç»“

### ä»»åŠ¡1çš„ç­”æ¡ˆ

âœ… **åŸæ–¹æ¡ˆå¯è¡Œï¼Œä½†éœ€è¦æ”¹è¿›ä¸ºåŒå±‚çŠ¶æ€è¡¨ç¤º**

- ç²—ç²’åº¦ AbstractStateï¼šç”¨äºæ¨¡å‹é€‰æ‹©
- ç»†ç²’åº¦ SymbolicStateï¼šç”¨äºç²¾ç¡®æ¨ç†

### ä»»åŠ¡2çš„ç­”æ¡ˆ

âœ… **çŠ¶æ€è½¬æ¢ = ä¿¡æ¯å¢é‡ï¼Œå·²æœ‰å®Œæ•´å®ç°æ–¹æ¡ˆ**

**æ ¸å¿ƒæœºåˆ¶**ï¼š
```python
S_{t+1} = S_t + apply_model(M_i, S_t)
```

**å…·ä½“å®ç°**ï¼š
1. æ¯ä¸ªæ¨¡å‹å®šä¹‰ä¸ºçŠ¶æ€è½¬æ¢å‡½æ•°
2. è½¬æ¢å‡½æ•°ä» `parameters` ä¸­æå–è¾“å…¥
3. è½¬æ¢å‡½æ•°å‘ `parameters`, `geometric_relations` æ·»åŠ è¾“å‡º
4. AbstractState è‡ªåŠ¨ä» SymbolicState é‡æ–°æŠ½è±¡

**å¦‚ä½•å¿«é€Ÿæ„å»ºS1, S2, ...**ï¼š
```python
states = theorem_library.apply_model_sequence(S0, [model_5, model_21])
# â†’ [S0, S1, S2]
```

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨

ä½ ç°åœ¨å¯ä»¥ï¼š

1. **è¿è¡Œæµ‹è¯•**
   ```bash
   cd /Users/ebeleagel/Documents/GitHub/EGR
   python src/state_abstractor.py
   python src/theorems/theorem_library.py
   ```

2. **æŸ¥çœ‹ç”Ÿæˆçš„ä»£ç **
   - `src/state_abstractor.py` - çŠ¶æ€æŠ½è±¡å™¨
   - `src/theorems/theorem_library.py` - å®šç†åº“
   - `scripts/data/build_state_sequences.py` - æ„å»ºè„šæœ¬

3. **è¡¥å……æ›´å¤šæ¨¡å‹**
   - å‚è€ƒ `model/conic_model_descriptions.md`
   - åœ¨ `theorem_library.py` ä¸­æ·»åŠ æ–°æ¨¡å‹

éœ€è¦æˆ‘å¸®ä½ å®Œæˆå“ªä¸€éƒ¨åˆ†ï¼Ÿ
