# 定理和操作分析 Prompt 模板

## 📋 基础分析 Prompt

```
请分析这个圆锥曲线数学问题数据集，识别出最常用的数学定理和代数操作。

数据说明：
- 每个样本包含 question（问题）和 process（求解过程）
- 共 X 个样本
- 主要涉及椭圆、双曲线、抛物线相关问题

请按以下格式输出：

## 1. 最常用的数学定理（Top 30）

| 排名 | 定理名称 | 使用频率 | 定义/公式 | 示例问题编号 |
|------|---------|---------|----------|-------------|
| 1 | 椭圆定义 | XXX次 | 到两焦点距离之和为常数2a | #12, #45, #78 |
| 2 | ... | ... | ... | ... |

## 2. 最常用的代数操作（Top 20）

| 排名 | 操作名称 | 使用频率 | 说明 | 典型场景 |
|------|---------|---------|------|---------|
| 1 | 代入法 | XXX次 | 将已知条件代入方程 | 求解参数问题 |
| 2 | ... | ... | ... | ... |

## 3. 定理分类统计

### 3.1 椭圆相关定理
- 椭圆定义：XXX次
- 离心率公式 e=c/a：XXX次
- 参数关系 c²=a²-b²：XXX次
- ...

### 3.2 双曲线相关定理
- 双曲线定义：XXX次
- 渐近线方程：XXX次
- 参数关系 c²=a²+b²：XXX次
- ...

### 3.3 抛物线相关定理
- 抛物线定义：XXX次
- 焦点弦长公式：XXX次
- ...

### 3.4 通用定理
- 点到直线距离公式：XXX次
- 韦达定理：XXX次
- ...

## 4. 推理模式分析

### 4.1 常见推理链
描述最常见的3-5种推理链路径，例如：
1. 椭圆方程 → 识别a,b → 计算c → 求离心率
2. ...

### 4.2 复杂推理场景
识别需要多步推理的复杂问题类型。

## 5. 建议的定理库结构

基于以上分析，建议定理库应包含以下核心定理...
```

---

## 🎯 深度分析 Prompt（可选）

```
基于上次的基础分析，请深入分析以下内容：

## 1. 定理依赖关系
分析定理之间的依赖关系，例如：
- 求离心率通常需要先用到哪些定理？
- 哪些定理经常一起使用？

## 2. 难度分级
将定理按使用复杂度分级：
- Level 1: 基础定义（直接应用）
- Level 2: 中级定理（需要1-2步推理）
- Level 3: 高级定理（需要多步推理）

## 3. 错误模式
识别可能的易错点和常见错误。

## 4. 优化建议
基于分析结果，提出定理库设计的优化建议。
```

---

## 💡 使用步骤

### 步骤1：生成精简数据集

```bash
cd /Users/ebeleagel/Documents/GitHub/EGR
python scripts/data/simplify_dataset.py
```

选择模式1或2（推荐模式1先测试）。

### 步骤2：在 Cursor 中打开精简数据

打开文件：
- 单文件模式：`scripts/data/simplified_train.json`
- 批次模式：`scripts/data/batches/batch_01_samples_1-1000.json`

### 步骤3：使用 Cursor Composer/Chat

1. 打开 Cursor Composer (`Cmd+I` 或 `Ctrl+I`)
2. 附加文件：点击文件图标，选择精简数据文件
3. 复制上面的"基础分析 Prompt"并粘贴
4. 等待 AI 分析（约1-2分钟）

### 步骤4：保存结果

将 AI 的分析结果保存到：
```
outputs/theorem_analysis_cursor.md
```

### 步骤5：（可选）深度分析

如果需要更深入的分析，使用"深度分析 Prompt"继续追问。

---

## 📊 预期输出示例

```markdown
## 1. 最常用的数学定理（Top 30）

| 排名 | 定理名称 | 使用频率 | 定义/公式 |
|------|---------|---------|----------|
| 1 | 椭圆参数关系 | 234次 | c²=a²-b² |
| 2 | 离心率公式 | 198次 | e=c/a |
| 3 | 双曲线参数关系 | 187次 | c²=a²+b² |
| 4 | 渐近线方程 | 156次 | y=±(b/a)x |
| 5 | 抛物线定义 | 143次 | 到焦点距离=到准线距离 |
...
```

---

## ⚠️ 注意事项

1. **上下文限制**：
   - 单次最多约 1000 个样本
   - 如果数据过大，使用批次模式

2. **分析质量**：
   - Cursor AI 可能需要多轮对话才能完善结果
   - 建议分批次分析后合并结果

3. **结果验证**：
   - AI 的统计可能不是100%准确
   - 建议抽样验证关键定理

4. **保存结果**：
   - 及时保存 AI 的分析结果
   - 可以要求 AI 输出 JSON 格式便于后续处理

---

## 🔄 批次分析工作流

如果使用批次模式（5个批次，每批次1000个样本）：

1. **分析 Batch 1**：
   - 打开 `batch_01_samples_1-1000.json`
   - 使用基础分析 prompt
   - 保存结果为 `analysis_batch_01.md`

2. **分析 Batch 2-5**：
   - 重复相同步骤

3. **合并结果**：
   - 让 AI 合并所有批次的分析结果
   - Prompt: "请合并以上5个批次的分析结果，给出完整的定理频率统计"

4. **最终输出**：
   - 保存到 `outputs/theorem_analysis_complete.md`
   - 生成 JSON 格式的定理库

---

## 🎨 高级技巧

### 要求结构化输出

```
请以JSON格式输出定理列表：

{
  "theorems": [
    {
      "name": "椭圆定义",
      "frequency": 234,
      "formula": "|PF1| + |PF2| = 2a",
      "category": "椭圆",
      "difficulty": "基础",
      "related_theorems": ["离心率公式", "椭圆参数关系"]
    },
    ...
  ],
  "operations": [
    {
      "name": "代入法",
      "frequency": 456,
      "description": "将已知条件代入方程",
      "typical_use": "求解参数"
    },
    ...
  ]
}
```

### 交互式追问

在 AI 给出初步分析后，可以追问：
- "请详细解释前10个高频定理的应用场景"
- "哪些定理组合最常见？"
- "给出每个定理的3个典型例题编号"

---

## 📖 相关文件

- 精简脚本：`scripts/data/simplify_dataset.py`
- 精简数据：`scripts/data/simplified_train.json`
- 批次数据：`scripts/data/batches/batch_*.json`
- 分析结果：`outputs/theorem_analysis_cursor.md`

